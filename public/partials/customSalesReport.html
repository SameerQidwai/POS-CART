<div class="row">
    <div class="col-lg-12">
        <h1 class="page-header">Weekly Sale's Report</h1>
    </div>
    <!-- /.col-lg-12 -->
</div>

<div class="row">
    <span class="col-md-1"></span>
    <div class="col-md-5">
        <b>Start Date: </b> <input class="form-control" ng-change="changeMin(startDate)" type="date"
            ng-model="startDate">
    </div>
    <div class="col-md-5">
        <b>End Date: </b> <input class="form-control" ng-model="endDate" id="listingDateClose" type="date"
            ng-change="call(startDate,endDate)" />
    </div>
</div>
<hr>

<div ng-show="whenTable">

    <h1 align="center">Sale's Report</h1>
    <p align="center" ng-model="mdate"><b>Date:</b> {{mdate}} </p>
    <hr />
    <br />
    <table class="table table-hover ">
        <thead>
            <tr>
                <th>Receipt Id</th>
                <th>Qty.</th>
                <!-- <th>Time</th> -->
                <th>Date</th>
                <th>Discount</th>
                <th>Total Price</th>
                <th>Ledger</th>
            </tr>
        </thead>
        <tbody>
            <tr ng-repeat='s in sales'>

                <td>{{s._id}}</td>
                <td>{{s.totalQty}}</td>
                <!-- <td>{{s.time}}</td> -->
                <td>{{s.date}}</td>
                <td>{{s.discount}}</td>
                <td>Rs {{s.totalPrice}}</td>
                <td><button ng-click="showLedger(s)" class="btn btn-success">button</button></td>

            </tr>
            <tr>
                <td></td>

                <td ng-model="totalit"><b>Total Items:</b> {{totalit}}</td>
                <td></td>
                <td ng-model="mydiscount"><b>Total Discount:</b> Rs {{mydiscount}}</td>
                <td ng-model="myProfit"><b>Gross Profit:</b> Rs {{myProfit}}</td>
                <td></td>
            </tr>
            <tr>
                <td></td>

                <td></td>
                <td></td>

                <td></td>
                <td ng-model="mysale"><b>Total Sale:</b> Rs {{mysale}}</td>
                <td></td>
            </tr>
        </tbody>
    </table>
    <hr />
    <center><a ng-click="openModal = !openModal" class="btn btn-lg btn-success">Print</a></center>
</div>

<modal title="Sale Report" visible="openModal">
    <div print-section>
        <center><img src="/img/img1.png" alt="DressUP" style="width:25%"></center>
        <center>
            <div style="margin:0">
                <p style="margin:0"><strong>Phone: +923452652950</strong></p>
                <p style="margin:0"><strong>6.N.R.Avenue (Tapal Bldg.) SD-I, Block-G <br>Barkat-e-Hyderi North
                        Nazimabad, Karachi</strong></p>
            </div>
        </center>
        <hr>
        <h3 align="center">Sale's Report Receipt</h3>
        <br />
        <span class="col-md-6" align="center"><b>Form:</b>{{startstringDate}} </span>
        <span class="col-md-6" align="center"><b>Till:</b>{{endstringDate}}</span>
        <br>
        <br>
        <p align="left" ng-model="mdate"><b>Date:</b> {{mdate}} </p>

        <hr />
        <br />
        <table class="table table-hover ">
            <thead>
                <tr>
                    <th>Receipt Id</th>
                    <th>Qty.</th>
                    <th>Time</th>
                    <th>Date</th>
                    <th>Total Price</th>

                </tr>
            </thead>
            <tbody>
                <tr ng-repeat='s in sales'>

                    <td>{{s._id}}</td>
                    <td>{{s.totalQty}}</td>
                    <td>{{s.time}}</td>
                    <td>{{s.date}}</td>
                    <td>Rs {{s.totalPrice}}</td>
                </tr>
                <tr></tr>
                <tr>
                    <td></td>

                    <td ng-model="totalit"><b>Total Items:</b> {{totalit}}</td>
                    <td></td>
                    <td></td>

                    <td></td>
                </tr>
                <tr>
                    <td></td>

                    <td></td>
                    <td></td>

                    <td></td>
                    <td ng-model="myProfit"><b>Gross Profit:</b> Rs {{myProfit}}</td>
                </tr>
                <tr>
                    <td></td>

                    <td></td>
                    <td></td>

                    <td></td>
                    <td ng-model="mysale"><b>Total Sale:</b> Rs {{mysale}}</td>
                </tr>
            </tbody>
        </table>
        </br>
        <hr />
        <p align="center"><b>**************** Custom sales Report ****************</b></p>
        <p align="center"><b>Thank You For Shopping!!</b></p>

    </div>
    <center><a href="javascript:window.print() " class="btn btn-lg btn-success">Print</a></center>
</modal>

<modal title="Purchase Item" visible="showPaidModal">
    <div print-section>
        <h3 align="center">Sale Recipt</h3>
        <hr>
        <div class="row" style="font-weight: bold; margin-bottom:1%">
            <p class="col-md-10"><strong>Receipt ID: </strong>{{slipId}}</p>
            <p class="col-md-5" style="text-transform: capitalize;"><strong>Customer: </strong>{{Name}} </p>
            <div class="col-md-2"></div>
            <p class="col-md-5"><strong>Date: </strong> {{purDate}}</p>
        </div>
        <table class="table table-hover " col-resizeable>
            <thead>
                <th>Date</th>
                <th>Time</th>
                <th>Product</th>
                <th>Price</th>
                <th>Quantity</th>
                <th>Total Price</th>
            </thead>
            <tbody>
                <tr ng-repeat="show in showPurchaseItems">
                    <td>{{show.date}}</td>
                    <td>{{show.time}}</td>
                    <td>{{show.itemName}}</td>
                    <td>{{show.price}}</td>
                    <td>{{show.purchasedQty}}</td>
                    <td>{{show.price*show.purchasedQty}}</td>
                </tr>
            </tbody>
        </table>
        <div class="row">
            <div class="col-md-5"><strong>Total Price: </strong>{{tPrice}} Rs</div>
            <div class="col-md-2"></div>
            <div class="col-md-5"><strong>Paid Rs: </strong> {{dPrice}} Rs</div>
        </div>
        <hr>
        <center>
            <p><b>Thank You For Shopping!</b></p>
            
        </center>
    </div>
    <center><a ng-click="print()" class="btn btn-lg btn-success">Print</a></center>

</modal>